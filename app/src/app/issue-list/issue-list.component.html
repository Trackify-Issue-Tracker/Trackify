<div
  (mouseover)="!showIssueForm && (showButton = true)"
  (mouseleave)="!showIssueForm && (showButton = false)"
  class="col-span-1 bg-background-2 rounded-2xl p-2 h-[50vh] overflow-hidden border border-blues-2"
  cdkDropList
  [id]="listId"
  [cdkDropListConnectedTo]="connectedLists"
  (cdkDropListDropped)="drop($event)"
  [cdkDropListData]="getFilteredIssues()"
>
  <div class="flex">
    <p class="text-main-4 pl-3 pt-3">
      {{ listTitle }}
    </p>
    <p class="text-main-4 pl-3 pt-3">{{ getFilteredIssues().length }}</p>
  </div>
  <div class="overflow-y-auto h-full pb-20">
    <div
      *ngFor="let issue of getFilteredIssues()"
      cdkDrag
      [cdkDragData]="issue"
      class="bg-white rounded-2xl m-2 hover:bg-blues-5 transition-colors duration-300 hover:border hover:border-blues-2 drop-shadow-md"
    >
      <div class="justify-between flex">
        <p class="pl-2 pt-2">{{ issue.title }}</p>

        <button (click)="deleteIssue(issue.id ?? '')">
          <svg
            clip-rule="evenodd"
            fill-rule="evenodd"
            stroke-linejoin="round"
            stroke-miterlimit="2"
            viewBox="0 0 24 24"
            width="24"
            height="24"
            xmlns="http://www.w3.org/2000/svg"
            class="m-2"
          >
            <path
              d="m4.015 5.494h-.253c-.413 0-.747-.335-.747-.747s.334-.747.747-.747h5.253v-1c0-.535.474-1 1-1h4c.526 0 1 .465 1 1v1h5.254c.412 0 .746.335.746.747s-.334.747-.746.747h-.254v15.435c0 .591-.448 1.071-1 1.071-2.873 0-11.127 0-14 0-.552 0-1-.48-1-1.071zm14.5 0h-13v15.006h13zm-4.25 2.506c-.414 0-.75.336-.75.75v8.5c0 .414.336.75.75.75s.75-.336.75-.75v-8.5c0-.414-.336-.75-.75-.75zm-4.5 0c-.414 0-.75.336-.75.75v8.5c0 .414.336.75.75.75s.75-.336.75-.75v-8.5c0-.414-.336-.75-.75-.75zm3.75-4v-.5h-3v.5z"
              fill-rule="nonzero"
            />
          </svg>
        </button>
      </div>

      <p class="pl-2">{{ issue.description }}</p>
      <div class="flex gap-x-2 pl-2">
        <p
          *ngIf="issue.priority"
          class="rounded-md p-1.5 bg-opacity-50"
          [ngClass]="{
            'bg-priority-1 text-priority-5': issue.priority === 'Low',
            'bg-priority-2 text-priority-6': issue.priority === 'Medium',
            'bg-priority-3 text-priority-7': issue.priority === 'High',
            'bg-priority-4 text-priority-8': issue.priority === 'Critical'
          }"
        >
          {{ issue.priority }}
        </p>

        <p
          *ngIf="issue.type"
          class="rounded-md p-1.5 bg-opacity-50"
          [ngClass]="{
            'bg-type-1 text-type-5': issue.type === 'Bug',
            'bg-type-2 text-type-6': issue.type === 'Task',
            'bg-type-3 text-type-7': issue.type === 'Improvement',
            'bg-type-4 text-type-8': issue.type === 'Feature',
            'bg-blues-2 text-blues-4': issue.type === 'Other'
          }"
        >
          {{ issue.type }}
        </p>

        <div
          *ngIf="issue.labels && issue.labels.length > 0"
          class="flex gap-x-1"
        >
          <p
            *ngFor="let label of issue.labels"
            class="bg-opacity-50 bg-[#977097] text-[#4D384D] rounded-md p-1.5"
          >
            {{ label }}
          </p>
        </div>
      </div>
    </div>
    <div
      [ngClass]="{
        ' rounded-md m-2 flex gap-x-1 items-center': !showIssueForm
      }"
      (mouseover)="showButton = true"
      (click)="toggleFormAndButton(listTitle)"
    >
      <svg
        *ngIf="showButton"
        clip-rule="evenodd"
        fill-rule="evenodd"
        stroke-linejoin="round"
        stroke-miterlimit="2"
        viewBox="0 0 24 24"
        width="16"
        height="16"
        stroke="currentColor"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="m11 11h-7.25c-.414 0-.75.336-.75.75s.336.75.75.75h7.25v7.25c0 .414.336.75.75.75s.75-.336.75-.75v-7.25h7.25c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-7.25v-7.25c0-.414-.336-.75-.75-.75s-.75.336-.75.75z"
          fill-rule="nonzero"
        />
      </svg>
      <button *ngIf="showButton">Create Issue</button>
    </div>
    <div *ngIf="showIssueForm && currentForm === listTitle" class="relative">
      <div
        class="flex-col p-4 bg-main-1 border-gray-300 rounded-lg shadow-md m-2"
      >
        <div class="justify-between flex">
          <div class="text-main-2 flex items-center">
            <svg
              class="w-5 h-5"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              width="24"
              height="24"
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
            >
              <path
                d="M20 11a3 3 0 0 0-3-3h-.6c-.372 0-.557 0-.713-.025a2 2 0 0 1-1.662-1.662C14 6.157 14 5.972 14 5.6V5a3 3 0 0 0-3-3m9 8v8a4 4 0 0 1-4 4H8a4 4 0 0 1-4-4V6a4 4 0 0 1 4-4h4a8 8 0 0 1 8 8Z"
              ></path>
            </svg>

            <!-- Input for Project Name -->
            <input
              [(ngModel)]="issueTitle"
              type="text"
              placeholder="Type a name..."
              class="pl-2 rounded-lg bg-main-1 h-10 placeholder:text-main-2"
            />
          </div>

          <div class="flex items-center text-main-2">
            <button
              (click)="createIssue(); toggleFormAndButton(listTitle)"
              class=""
            >
              <svg
                clip-rule="evenodd"
                fill-rule="evenodd"
                stroke-linejoin="round"
                stroke-miterlimit="2"
                viewBox="0 0 24 24"
                width="24"
                height="24"
                stroke="currentColor"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="m11 11h-7.25c-.414 0-.75.336-.75.75s.336.75.75.75h7.25v7.25c0 .414.336.75.75.75s.75-.336.75-.75v-7.25h7.25c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-7.25v-7.25c0-.414-.336-.75-.75-.75s-.75.336-.75.75z"
                  fill-rule="nonzero"
                />
              </svg>
            </button>
          </div>
        </div>
        <div class="bg-main-3 rounded-lg w-[7.5rem] p-2 flex gap-x-2">
          <div class="items-end justify-center mb-[-1rem]">
            <svg width="12" height="12" viewBox="0 0 36 24">
              <circle cx="12" cy="16" fill-rule="nonzero" r="9.998" />
            </svg>
          </div>
          <div class="items-end justify-center mb-[-1rem]">
            <p>Not started</p>
          </div>
        </div>

        <div class="flex items-center text-main-2">
          <svg
            clip-rule="evenodd"
            fill-rule="evenodd"
            stroke-linejoin="round"
            stroke-miterlimit="2"
            viewBox="0 0 24 24"
            width="24"
            height="24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="m15 17.75c0-.414-.336-.75-.75-.75h-11.5c-.414 0-.75.336-.75.75s.336.75.75.75h11.5c.414 0 .75-.336.75-.75zm7-4c0-.414-.336-.75-.75-.75h-18.5c-.414 0-.75.336-.75.75s.336.75.75.75h18.5c.414 0 .75-.336.75-.75zm0-4c0-.414-.336-.75-.75-.75h-18.5c-.414 0-.75.336-.75.75s.336.75.75.75h18.5c.414 0 .75-.336.75-.75zm0-4c0-.414-.336-.75-.75-.75h-18.5c-.414 0-.75.336-.75.75s.336.75.75.75h18.5c.414 0 .75-.336.75-.75z"
              fill-rule="nonzero"
            />
          </svg>
          <!-- Input for Project Description -->
          <input
            [(ngModel)]="issueDescription"
            type="text"
            placeholder="Add Description"
            class="pl-2 rounded-lg bg-main-1 h-10 placeholder:text-main-2"
          />
        </div>

        <div class="flex items-center text-main-2">
          <svg
            clip-rule="evenodd"
            fill-rule="evenodd"
            stroke-linejoin="round"
            stroke-miterlimit="2"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="m3.3 15.4c.717 0 1.3.583 1.3 1.3s-.583 1.3-1.3 1.3-1.3-.583-1.3-1.3.583-1.3 1.3-1.3zm2.7 1.85c0-.414.336-.75.75-.75h14.5c.414 0 .75.336.75.75s-.336.75-.75.75h-14.5c-.414 0-.75-.336-.75-.75zm-2.7-6.55c.717 0 1.3.583 1.3 1.3s-.583 1.3-1.3 1.3-1.3-.583-1.3-1.3.583-1.3 1.3-1.3zm2.7 1.3c0-.414.336-.75.75-.75h14.5c.414 0 .75.336.75.75s-.336.75-.75.75h-14.5c-.414 0-.75-.336-.75-.75zm-2.7-6c.717 0 1.3.583 1.3 1.3s-.583 1.3-1.3 1.3-1.3-.583-1.3-1.3.583-1.3 1.3-1.3zm2.7.75c0-.414.336-.75.75-.75h14.5c.414 0 .75.336.75.75s-.336.75-.75.75h-14.5c-.414 0-.75-.336-.75-.75z"
              fill-rule="nonzero"
            />
          </svg>
          <!-- Input for Project Description -->
          <input
            [(ngModel)]="inputLabels"
            type="text"
            placeholder="Add Labels"
            class="pl-2 rounded-lg bg-main-1 h-10 placeholder:text-main-2"
          />
        </div>
        <div class="flex items-center text-main-2 gap-x-1">
          <svg
            clip-rule="evenodd"
            fill-rule="evenodd"
            stroke-linejoin="round"
            stroke-miterlimit="2"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="m11.998 2c5.517 0 9.997 4.48 9.997 9.998 0 5.517-4.48 9.997-9.997 9.997-5.518 0-9.998-4.48-9.998-9.997 0-5.518 4.48-9.998 9.998-9.998zm0 1.5c-4.69 0-8.498 3.808-8.498 8.498s3.808 8.497 8.498 8.497 8.497-3.807 8.497-8.497-3.807-8.498-8.497-8.498zm4.845 6.711c.108-.141.157-.3.157-.456 0-.389-.306-.755-.749-.755h-8.501c-.445 0-.75.367-.75.755 0 .157.05.316.159.457 1.203 1.554 3.252 4.199 4.258 5.498.142.184.36.29.592.29.23 0 .449-.107.591-.291zm-7.564.289h5.446l-2.718 3.522z"
              fill-rule="nonzero"
            />
          </svg>
          <select
            [(ngModel)]="issuePriority"
            class="appearance-none pl-2 rounded-lg bg-main-1 h-10 text-main-2"
          >
            <option value="" selected disabled>Add Priority</option>
            <option value="Low">Low</option>
            <option value="Medium">Medium</option>
            <option value="High">High</option>
            <option value="Critical">Critical</option>
          </select>
          <select
            [(ngModel)]="issueType"
            class="appearance-none pl-2 rounded-lg bg-main-1 h-10 text-main-2"
          >
            <option value="" selected disabled>Add Type</option>
            <option value="Bug">Bug</option>
            <option value="Task">Task</option>
            <option value="Improvement">Improvement</option>
            <option value="Feature">Feature</option>
            <option value="Other">Other</option>
          </select>
        </div>
      </div>
    </div>
  </div>
</div>
